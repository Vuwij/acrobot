/*
 * Sponsored License - for use in support of a program or activity
 * sponsored by MathWorks.  Not for government, commercial or other
 * non-sponsored organizational use.
 * File: calc_qd.c
 *
 * MATLAB Coder version            : 4.3
 * C/C++ source code generated on  : 08-Apr-2020 04:22:08
 */

/* Include Files */
#include "calc_qd.h"
#include "calc_B.h"
#include "calc_B_data.h"
#include "calc_B_initialize.h"
#include "calc_C.h"
#include "calc_D.h"
#include "calc_De.h"
#include "calc_E.h"
#include "calc_EE.h"
#include "calc_J.h"
#include "calc_P.h"
#include "calc_dUde.h"
#include "calc_rend.h"
#include "rt_defines.h"
#include "rt_nonfinite.h"
#include <math.h>

/* Function Declarations */
static float rt_atan2f_snf(float u0, float u1);

/* Function Definitions */

/*
 * Arguments    : float u0
 *                float u1
 * Return Type  : float
 */
static float rt_atan2f_snf(float u0, float u1)
{
  float y;
  int b_u0;
  int b_u1;
  if (rtIsNaNF(u0) || rtIsNaNF(u1)) {
    y = rtNaNF;
  } else if (rtIsInfF(u0) && rtIsInfF(u1)) {
    if (u0 > 0.0F) {
      b_u0 = 1;
    } else {
      b_u0 = -1;
    }

    if (u1 > 0.0F) {
      b_u1 = 1;
    } else {
      b_u1 = -1;
    }

    y = atan2f((float)b_u0, (float)b_u1);
  } else if (u1 == 0.0F) {
    if (u0 > 0.0F) {
      y = RT_PIF / 2.0F;
    } else if (u0 < 0.0F) {
      y = -(RT_PIF / 2.0F);
    } else {
      y = 0.0F;
    }
  } else {
    y = atan2f(u0, u1);
  }

  return y;
}

/*
 * CALC_QD
 *     QD = CALC_QD(L1,L2,X,Y)
 * Arguments    : float l1
 *                float l2
 *                float x
 *                float y
 *                float qd[2]
 * Return Type  : void
 */
void calc_qd(float l1, float l2, float x, float y, float qd[2])
{
  float t12;
  if (isInitialized_calc_B == false) {
    calc_B_initialize();
  }

  /*     This function was generated by the Symbolic Math Toolbox version 8.4. */
  /*     07-Apr-2020 19:04:19 */
  t12 = acosf(1.0F / l1 * (1.0F / l2) * (((l1 * l1 + l2 * l2) + -(x * x)) + -(y *
    y)) / 2.0F);
  qd[0] = (t12 * -0.5F + 1.57079637F) + rt_atan2f_snf(y, x);
  qd[1] = t12 - 3.14159274F;
}

/*
 * File trailer for calc_qd.c
 *
 * [EOF]
 */
